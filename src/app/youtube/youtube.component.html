<div class="youtube-container no-form-field-bottom-space">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <h1 class="main-title">YouTube AI Summarizer</h1>
      <p class="subtitle">Transform any YouTube video into concise, intelligent summaries</p>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Input Card -->
    <div class="input-card">
      <div class="card-header">
        <mat-icon class="card-icon">smart_display</mat-icon>
        <h3 class="card-title">Video Input</h3>
      </div>

      <div class="input-container">
        <mat-form-field appearance="outline" class="input-field">
          <mat-label>YouTube URL</mat-label>
          <input matInput [formControl]="inputControl" placeholder="https://www.youtube.com/watch?v=jNQXAC9IVRw">
          <mat-icon matSuffix *ngIf="isLoadingVideo() && inputControl.valid" class="loading-icon">hourglass_empty</mat-icon>
          <mat-icon matSuffix *ngIf="isValidUrl() && !isLoadingVideo()" class="success-icon">check_circle</mat-icon>
          <mat-error *ngIf="inputControl.invalid && inputControl.touched">
            {{ errorMessage() }}
          </mat-error>
        </mat-form-field>
        <div class="action-buttons">
          <button mat-fab color="primary" class="submit-button" (click)="onSubmit()"
            [disabled]="inputControl.invalid || !videoDuration() || videoDuration()! <= 0"
            matTooltip="Generate Summary">
            <mat-icon>north</mat-icon>
          </button>
          <button mat-fab class="tune-button" (click)="toggleFinetuning()"
            [disabled]="inputControl.invalid || !videoDuration() || videoDuration()! <= 0"
            [class.active]="isFinetuningExpanded()"
            matTooltip="Advanced Settings">
            <mat-icon>tune</mat-icon>
          </button>
        </div>
      </div>
      
      <!-- Error Message -->
      <div *ngIf="errorMessage150()" class="error-message">
        <mat-icon>error_outline</mat-icon>
        <span>{{ errorMessage150() }}</span>
      </div>
      </div>
      
      <!-- Two Column Layout for Settings Only -->
      <div class="content-grid" *ngIf="!inputControl.invalid && videoDuration() && videoDuration()! > 0">
      <!-- Fine-tuning Card -->
      <div class="settings-card" *ngIf="isFinetuningExpanded()">
        <div class="card-header">
          <mat-icon class="card-icon">settings</mat-icon>
          <h3 class="card-title">Advanced Settings</h3>
        </div>
        <app-youtube-fine-tuning [videoDuration]="videoDuration()" [isExpanded]="isFinetuningExpanded()"
          [initialConfig]="finetuningConfig()" (configChange)="onFinetuningConfigChange($event)">
        </app-youtube-fine-tuning>
      </div>
      </div>

    <!-- Hidden Video Preview for Duration Detection -->
    <div class="hidden-video" *ngIf="!inputControl.invalid">
      <app-youtube-video-preview [url]="inputControl.value || ''" (duration)="onDuration($event)"
        (error)="onVideoError($event)">
      </app-youtube-video-preview>
    </div>
  </div>
</div>