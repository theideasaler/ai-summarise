<div class="file-upload-container">
  <!-- Drop Zone -->
  <div 
    class="drop-zone"
    [class.dragging]="isDragging()"
    [class.has-files]="selectedFiles().length > 0"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    (click)="openFileDialog()"
    *ngIf="selectedFiles().length === 0">
    
    <div class="drop-zone-content">
      <mat-icon class="upload-icon">cloud_upload</mat-icon>
      <p class="placeholder-text">{{ placeholder }}</p>
      <p class="hint-text">Click or drag files here</p>
    </div>
  </div>

  <!-- Selected Files Display -->
  <div class="selected-files" *ngIf="selectedFiles().length > 0">
    <div class="file-item" *ngFor="let file of selectedFiles()">
      <div class="file-icon">
        <mat-icon [class.image-icon]="fileType === 'image'"
                  [class.audio-icon]="fileType === 'audio'"
                  [class.video-icon]="fileType === 'video'"
                  [class.document-icon]="fileType === 'document'">
          {{ fileType === 'image' ? 'image' : 
             fileType === 'audio' ? 'audio_file' : 
             fileType === 'video' ? 'video_file' : 
             'description' }}
        </mat-icon>
      </div>
      
      <div class="file-info">
        <p class="file-name">{{ file.name }}</p>
        <div class="file-meta">
          <span class="file-size">{{ file.size }}</span>
          <span class="file-duration" *ngIf="file.duration">
            â€¢ {{ formatDuration(file.duration) }}
          </span>
        </div>
      </div>
      
      <button mat-icon-button color="warn" (click)="removeFile(file)" class="remove-button">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
    
    <!-- Add More Files Button (if multiple) -->
    <button 
      mat-stroked-button 
      color="primary" 
      (click)="openFileDialog()"
      class="add-more-button"
      *ngIf="multiple">
      <mat-icon>add</mat-icon>
      Add More Files
    </button>
  </div>

  <!-- Hidden File Input -->
  <input 
    #fileInput
    type="file"
    [accept]="acceptedTypes"
    [multiple]="multiple"
    (change)="onFileSelect($event)"
    style="display: none;">

  <!-- Processing Spinner -->
  <div class="processing-overlay" *ngIf="isProcessing()">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Processing files...</p>
  </div>
</div>