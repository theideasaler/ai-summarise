<header class="app-header">
  <div class="header-content">
    <div class="logo-section">
      <a routerLink="/" class="logo">
        <span class="logo-text">{{ title }}</span>
      </a>
    </div>

    <nav class="nav-section">
      <ng-container *ngIf="isLoading$ | async; else authContent">
        <div class="loading-indicator">
          <span class="loading-spinner"></span>
        </div>
      </ng-container>
      
      <ng-template #authContent>
        <ng-container *ngIf="currentUser$ | async as user; else guestContent">
          <!-- Authenticated User -->
          <div class="auth-controls">
            <div class="user-menu">
              <div class="user-info">
                <app-user-avatar [user]="user" size="medium"></app-user-avatar>
                <span class="user-name">{{ user.displayName || user.email }}</span>
              </div>
              <button (click)="signOut()" class="sign-out-btn">
                Sign Out
              </button>
            </div>
          </div>
        </ng-container>
        
        <ng-template #guestContent>
          <!-- Guest User -->
          <div class="auth-controls">
            <div class="guest-controls">
              <button (click)="navigateToLogin()" class="login-btn">
                Sign In
              </button>
              <button (click)="navigateToSignup()" class="signup-btn">
                Sign Up
              </button>
            </div>
          </div>
        </ng-template>
      </ng-template>
    </nav>
  </div>
</header>